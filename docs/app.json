[{"name":"app.R","content":"library(shiny)  # http://shiny.rstudio.com/\nlibrary(tidyverse)\nlibrary(gtools)\nlibrary(DT)\nlibrary(markdown)\n\n# input .txt file w/common psychiatric medications on each line\nmedsPsych <- as.data.frame(read.table(file = \"data/medicationsPsychiatry.txt\", header = FALSE, sep = \"\\n\"))\nnames(medsPsych) <- \"meds\"\n\n# Define UI for application that draws a histogram\nui <- fluidPage(\n\n    # Application title\n    titlePanel(\"Medication Interactions\"),\n    a(\"bit.ly/medixn\", href =\"https://bit.ly/medixn\"),\n    \n    # Sidebar \n    sidebarLayout(\n      \n      sidebarPanel(\n        \n        # input box to enter medications\n        selectizeInput(\n          inputId = \"medicationsPsychiatry\",\n          label = \"Enter 2 or more medications, separated by commas\",\n          choices = medsPsych$meds,\n          selected = NULL,\n          multiple = TRUE,\n          width = \"100%\",\n          options = list(\n            'plugins' = list('remove_button'),\n            'create' = TRUE,\n            'persist' = TRUE,\n          placeholder = \"e.g., abilify, haloperidol, quetiapine\"\n          )\n          ),\n\n        # input box to enter number of combinations\n        numericInput(\n          inputId = \"n_combo\",\n          label = \"Number of medications to combine\",\n          value = 2,\n          min = 2,\n          max = 10\n        ),\n        \n        # text to filter combinations by\n        textInput(\n          inputId = \"filter_med\",\n          label = \"Search combinations for a specific medicine\",\n          value = NULL,\n          placeholder = \"type the name of a single medicaiton (not case sensitive)\"\n        )\n        \n      ),\n      \n      # main panel output\n      mainPanel(\n        \n        p(\"Your treatment team may prescribe more than one medication at a time.\"),\n        \n        h3(\"Possible medication combinations include:\"),\n       \n        DTOutput(\"valu\", width = \"100%\"),\n        \n      )\n      \n    ),\n    \n    # add a row at the bottom with the readme .md file\n    fluidRow(column(12, \n        includeMarkdown(\"README.md\")\n        )\n    )\n    \n)\n\n# Define server logic required to create table of combinations\nserver <- function(input, output, session) {\n  \n  # widget input medications\n  medicationsPsychiatry <- reactive({\n    as.character(input$medicationsPsychiatry)\n  })\n\n  # widget input number of combinations\n  n_combo <- reactive({\n    input$n_combo # size of target vectors\n  })  \n  \n  # widget input search text to filter all medication combinations\n  filter_med <- reactive({\n    input$filter_med # size of target vectors\n  })  \n  \n  combine_meds <- reactive({\n\n      # create combinations of all possible entries\n      tibble_combo <- as_tibble(\n        combinations(\n          n=length(medicationsPsychiatry()), \n          r=n_combo(), \n          v = medicationsPsychiatry(), \n          set = TRUE, \n          repeats.allowed = FALSE\n          )\n      )\n      names(tibble_combo) <- paste(\"Medication\", 1:n_combo())\n      \n      # if text is provided for filtering by medication...\n      if(!is.null(filter_med())){\n        # ...then filter medicine by that medication\n        tibble_combo <- filter(\n          .data = tibble_combo,\n          if_any(.cols = everything(), .fns = ~ grepl(str_to_lower(filter_med()), .))\n        )\n      }\n      \n      # format table for document\n      tibble_out <- mutate(\n        # combine multiple medications into single column\n        unite(\n          data = tibble_combo, \n          col = med_combo, \n          sep = \" + \"\n        ), \n        # capitalize first letter of each line\n        med_combo = gsub(\"^([a-z])\", \"\\\\U\\\\1\", med_combo, perl=TRUE)\n      )\n      \n      # final output\n      names(tibble_out) <- paste(\"Combinations of\", n_combo(), \"Medications\")\n      return(tibble_out)\n      \n  })\n\n  output$valu <- renderDT({\n    \n    # run the app only if appropriate number of medications\n    # and combination numbers provided\n    if(length(medicationsPsychiatry()) >= n_combo()) { \n      \n      data <- combine_meds()\n      \n      DT::datatable(\n        data,\n        class = 'cell-border stripe',\n        rownames = FALSE,\n        colnames = NULL,\n        extensions = c(\"Buttons\", \"Select\"),\n        selection = 'none',\n        fillContainer = FALSE,\n        options = list(\n          pageLength = 100,\n          select = TRUE,\n          dom = \"Brtip\",  ##  remove f to remove search  ## Brftip\n          scrollX = TRUE,\n          buttons = list(\n            list(\n              title = NULL,\n              extend = \"copy\",\n              text = 'Copy'#,\n              #exportOptions = list(modifier = list(selected = TRUE))\n              )\n            )\n          )) %>% \n        formatStyle(0, target = \"row\", fontWeight = styleEqual(1, \"bold\")) \n      }\n\n  }, server = FALSE)\n  \n}\n\n# Run the application \nshinyApp(ui = ui, server = server)\n","type":"text"},{"name":"README.md","content":"## How to Use this Web App\n\nThis [web application](https://bit.ly/medixn) lists all possible combinations of medications. \n\nThis can be helpful when preparing medical documents, e.g., medication petitions.\n\nThis tool only lists possible combinations of medications. It does not return interactions between medications; see the [Drug Interaction Checker](https://reference.medscape.com/drug-interactionchecker) by Medscape.\n\n**WARNING** the number of combinations can increase exponentially. Be judicious when searching for possible combinations.\n\n### Medications\n\nEnter the names of medications, separated by commas.\n\nAlternatively, click through some of the provided default medications commonly used in psychiatry.\n\n### Number of Medications to Combine\n\nSelect how many different medications to combine, ranging from 2 to 10; the default is 2.\n\n### Search by Medicine\n\nFilter combinations for a specific medicine by entering the name into the search field.\n\nNote, medications with similar names can be selected unintentionally.\n\ne.g., searching \"haldol\" will show both \"haldol\" and \"haldol decanoate\"\n\n### Select the Combinations\n\nOnce a table is generated, click the desired rows of medication combinations. \n\nHold down the `command` key (`control` key on Windows PC), and click to highlight multiple desired rows.\n\n### Copy\n\nClick the `Copy` button above the table to copy highlighted medication combinations to the clipboard, which can then be pasted into Microsoft Word.\n\nNote, if the entire table is desired, click the `Copy` button without highlighting any rows.\n","type":"text"},{"name":"README.txt","content":"## How to Use this Web App\n\n- Version 1.0\n- Link: [bit.ly/medixn](https://bit.ly/medixn)\n\nThis [web application](https://bit.ly/medixn) lists all possible combinations of medications. \n\nThis can be helpful when preparing medical documents, e.g., medication petitions.\n\nThis tool only lists possible combinations of medications. It does not return interactions between medications; see the [Drug Interaction Checker](https://reference.medscape.com/drug-interactionchecker) by Medscape.\n\n**WARNING** the number of combinations can increase exponentially. Be judicious when searching for possible combinations.\n\n### Medications\n\nEnter the names of medications, separated by commas.\n\nAlternatively, click through some of the provided default medications commonly used in psychiatry.\n\n### Number of Medications to Combine\n\nSelect how many different medications to combine, ranging from 2 to 10; the default is 2.\n\n### Search by Medicine\n\nFilter combinations for a specific medicine by entering the name into the search field.\n\nNote, medications with similar names can be selected unintentionally.\n\ne.g., searching \"haldol\" will show both \"haldol\" and \"haldol decanoate\"\n\n### Select the Combinations\n\nOnce a table is generated, click the desired rows of medication combinations. \n\nHold down the `command` key (`control` key on Windows PC), and click to highlight multiple desired rows.\n\n### Copy\n\nClick the `Copy` button above the table to copy highlighted medication combinations to the clipboard, which can then be pasted into Microsoft Word.\n\nNote, if the entire table is desired, click the `Copy` button without highlighting any rows.\n","type":"text"},{"name":"app-render.R","content":"library(shinylive)\nshinylive::export(appdir = \".\", destdir = \"./docs\")\n","type":"text"},{"name":"data/medicationsPsychiatry.txt","content":"haloperidol\naripiprazole\nclozapine\nfluphenazine\nolanzapine\nrisperidone\nquetiapine\nhaloperidol decanoate\naripiprazole (Abilify Maintena)\naripiprazole lauroxil (Aristada)\nfluphenazine decanoate\npaliperidone palmitate (Invega Sustenna)\nvalproate\nlithium\ncarbamazepine\nsertraline\nfluoxetine\ncitalopram\nescitalopram\nlorazepam\nclonazepam\nalprazolam\nn-acetylcysteine\nclonidine\npropranolol\n","type":"text"},{"name":"data/medicationsPsychiatrySahbS.txt","content":"aripiprazole 2 – 30 mg PO per day\nchlorpromazine 10 – 1200 mg PO or IM per day\nclozapine 25 – 800mg PO per day\nfluphenazine 5 – 40 mg PO per day\nhaloperidol 2.5 – 30mg PO or IM per day\nlurasidone 20 – 160mg PO per day\nolanzapine 2.5 – 40mg PO or IM per day\nrisperidone 1 – 8mg PO per day\npaliperidone 3 – 12mg PO per day\nquetiapine 25 – 1600 mg PO per day\nziprasidone 10 – 160 mg PO or 10 – 40mg IM per day\naripiprazole lauroxil (Abilify Aristada): initial load of 675mg (Aristada Initio) plus 441 – 1064 mg IM; with subsequent 441 – 1064mg IM  every 3 to 8 weeks\naripiprazole (Abilify Maintena) 300 – 400mg IM every month\nfluphenazine decanoate 12.5 mg – 50 mg IM every 1 to 3 weeks\nhaloperidol decanoate 50 – 200 mg IM every 2 to 4 weeks\npaliperidone palmitate (Invega Sustenna): initial load with 234mg IM on day 1, then 156mg IM 4 – 10 days later; followed by 78 – 234mg IM every 3 – 4 weeks\nrisperidone (Risperdal Consta) 12.5 – 50mg IM every 2 weeks\ncarbamazepine 100 – 600mg PO per day\nlamotrigine 25 – 400mg PO per day\nlithium carbonate PO 150 – 2400 mg per day\nvalproate (valproic acid, divalproex) 250 – 5000 mg PO or IV per day\npropranolol 10 – 120mg PO per day\nclonazepam 0.5 – 4mg PO per day\nlorazepam 0.5 – 30mg PO or IM per day","type":"text"},{"name":"medication-interactions.Rproj","content":"Version: 1.0\n\nRestoreWorkspace: Default\nSaveWorkspace: Default\nAlwaysSaveHistory: Default\n\nEnableCodeIndexing: Yes\nUseSpacesForTab: Yes\nNumSpacesForTab: 2\nEncoding: UTF-8\n\nRnwWeave: Sweave\nLaTeX: pdfLaTeX\n","type":"text"}]
